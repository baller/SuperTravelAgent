![logo](assets/logo.png)

[![English](https://img.shields.io/badge/English-Click-yellow)](README.md)
[![ç®€ä½“ä¸­æ–‡](https://img.shields.io/badge/ç®€ä½“ä¸­æ–‡-ç‚¹å‡»æŸ¥çœ‹-orange)](README_CN.md)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Python 3.10+](https://img.shields.io/badge/Python-3.10+-brightgreen.svg)](https://python.org)
[![Version](https://img.shields.io/badge/Version-0.9-green.svg)](https://github.com/ZHangZHengEric/Sage)

[è¯•ä¸€ä¸‹](http://36.133.44.114:20040/)

# ğŸš€ Sage å¤šæ™ºèƒ½ä½“æ¡†æ¶

> **ç”Ÿäº§å°±ç»ªã€æ¨¡å—åŒ–ã€æ™ºèƒ½çš„å¤šæ™ºèƒ½ä½“ç¼–æ’æ¡†æ¶ï¼Œä¸“ä¸ºå¤æ‚é—®é¢˜è§£å†³è€Œè®¾è®¡**

Sage æ˜¯ä¸€ä¸ªå…ˆè¿›çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œé€šè¿‡æ— ç¼çš„æ™ºèƒ½ä½“åä½œï¼Œæ™ºèƒ½åœ°å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯ç®¡ç†çš„å­ä»»åŠ¡ã€‚é‡‡ç”¨ä¼ä¸šçº§å¯é æ€§å’Œå¯æ‰©å±•æ€§è®¾è®¡ï¼Œæä¾›**æ·±åº¦ç ”ç©¶æ¨¡å¼**è¿›è¡Œå…¨é¢åˆ†æå’Œ**å¿«é€Ÿæ‰§è¡Œæ¨¡å¼**è¿›è¡Œå¿«é€Ÿä»»åŠ¡å®Œæˆã€‚

## âœ¨ æ ¸å¿ƒäº®ç‚¹

ğŸ§  **æ™ºèƒ½ä»»åŠ¡åˆ†è§£** - è‡ªåŠ¨å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¯ç®¡ç†çš„å­ä»»åŠ¡ï¼Œæ”¯æŒä¾èµ–å…³ç³»è·Ÿè¸ª  
ğŸ”„ **æ™ºèƒ½ä½“ç¼–æ’** - ä¸“ä¸šæ™ºèƒ½ä½“é—´çš„æ— ç¼åè°ƒï¼Œå…·å¤‡å¼ºå¤§çš„é”™è¯¯å¤„ç†æœºåˆ¶  
ğŸ› ï¸ **å¯æ‰©å±•å·¥å…·ç³»ç»Ÿ** - åŸºäºæ’ä»¶çš„æ¶æ„ï¼Œæ”¯æŒMCPæœåŠ¡å™¨å’Œè‡ªåŠ¨å‘ç°  
âš¡ **åŒé‡æ‰§è¡Œæ¨¡å¼** - æ ¹æ®éœ€æ±‚é€‰æ‹©æ·±åº¦åˆ†ææˆ–å¿«é€Ÿæ‰§è¡Œ  
ğŸŒ **äº¤äº’å¼Webç•Œé¢** - åŸºäºStreamlitçš„ç²¾ç¾UIï¼Œå®æ—¶æµå¼å¯è§†åŒ–  
ğŸ“Š **é«˜çº§ä»¤ç‰Œè·Ÿè¸ª** - å…¨é¢çš„ä½¿ç”¨ç»Ÿè®¡å’Œæ‰€æœ‰æ™ºèƒ½ä½“çš„æˆæœ¬ç›‘æ§  
âš™ï¸ **ä¸°å¯Œé…ç½®** - ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ã€CLIé€‰é¡¹å’Œè¿è¡Œæ—¶æ›´æ–°  
ğŸ”§ **å¼€å‘è€…å‹å¥½** - æ¸…æ´çš„APIã€å…¨é¢çš„æ–‡æ¡£ã€ç¤ºä¾‹å’Œå¹¿æ³›çš„é”™è¯¯å¤„ç†  
ğŸ¯ **ç”Ÿäº§å°±ç»ª** - å¼ºå¤§çš„é”™è¯¯æ¢å¤ã€æ—¥å¿—è®°å½•ã€é‡è¯•æœºåˆ¶å’Œæ€§èƒ½ä¼˜åŒ–

## ğŸ¤– æ”¯æŒçš„æ¨¡å‹

Sage å·²ç»è¿‡ä»¥ä¸‹è¯­è¨€æ¨¡å‹çš„å¹¿æ³›æµ‹è¯•ï¼š

### âœ… å®˜æ–¹æµ‹è¯•æ¨¡å‹
- **ğŸ”¥ DeepSeek-V3** - `deepseek-chat` - å¤æ‚æ¨ç†çš„å“è¶Šæ€§èƒ½
- **ğŸŒŸ Qwen-3** - `qwen-turbo`, `qwen-plus` - å‡ºè‰²çš„ä¸­è‹±æ–‡èƒ½åŠ›  
- **ğŸ§  GPT-4.1** - `gpt-4-turbo`, `gpt-4o` - æ‰€æœ‰ä»»åŠ¡çš„é¡¶çº§æ€§èƒ½
- **âš¡ Claude-3.5 Sonnet** - `claude-3-5-sonnet-20241022` - å“è¶Šçš„æ¨ç†èƒ½åŠ›

### ğŸŒ å…¼å®¹æä¾›å•†
- **OpenAI** - ç›´æ¥APIé›†æˆ
- **OpenRouter** - è®¿é—®200+æ¨¡å‹
- **Anthropic** - Claudeç³»åˆ—æ¨¡å‹
- **Google AI** - Geminiç³»åˆ—
- **DeepSeek** - åŸç”ŸAPIæ”¯æŒ
- **é˜¿é‡Œäº‘** - Qwenç³»åˆ—
- **Mistral AI** - æ‰€æœ‰Mistralæ¨¡å‹

> ğŸ’¡ **æ³¨æ„**: è™½ç„¶Sageé’ˆå¯¹ä¸Šè¿°æ¨¡å‹è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†å®ƒè®¾è®¡ä¸ºå¯ä¸ä»»ä½•OpenAIå…¼å®¹çš„APIç«¯ç‚¹é…åˆä½¿ç”¨ã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```mermaid
graph TD
    A[ğŸ” ç”¨æˆ·è¾“å…¥] --> B(ğŸ“‹ ä»»åŠ¡åˆ†ææ™ºèƒ½ä½“)
    B --> C{âœ… åˆ†æå®Œæˆ?}
    C -->|æ˜¯| D[ğŸ¯ ä»»åŠ¡åˆ†è§£æ™ºèƒ½ä½“]
    C -->|å¦| B
    D --> E[ğŸ“ è§„åˆ’æ™ºèƒ½ä½“]
    E --> F[âš¡ æ‰§è¡Œæ™ºèƒ½ä½“]
    F --> G[ğŸ‘ï¸ è§‚å¯Ÿæ™ºèƒ½ä½“]
    G --> H{ğŸª ä»»åŠ¡å®Œæˆ?}
    H -->|æ˜¯| I[ğŸ“„ æ€»ç»“æ™ºèƒ½ä½“]
    H -->|å¦| E
    I --> J[ğŸ‰ æœ€ç»ˆè¾“å‡º]
    
    subgraph "ğŸ› ï¸ å·¥å…·ç”Ÿæ€ç³»ç»Ÿ"
        F --> K[ğŸ”§ å·¥å…·ç®¡ç†å™¨]
        K -->|æœ¬åœ°| L[ğŸ“± å†…ç½®å·¥å…·]
        K -->|è¿œç¨‹| M[ğŸŒ MCPæœåŠ¡å™¨]
        M --> N[ğŸ”Œ å¤–éƒ¨API]
        L --> O[ğŸ“Š ç»“æœ]
        N --> O
        O --> G
    end
    
    subgraph "ğŸ“Š ä»¤ç‰Œè·Ÿè¸ª"
        B --> P[ğŸ’° ä½¿ç”¨ç›‘æ§]
        D --> P
        E --> P
        F --> P
        G --> P
        I --> P
        P --> Q[ğŸ“ˆ æˆæœ¬åˆ†æ]
    end
    
    style A fill:#e1f5fe
    style J fill:#e8f5e8
    style K fill:#fff3e0
    style P fill:#f3e5f5
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
git clone https://github.com/ZHangZHengEric/Sage.git
cd Sage
pip install -r requirements.txt
```

### ğŸ® äº¤äº’å¼Webæ¼”ç¤º

é€šè¿‡æˆ‘ä»¬ç²¾ç¾çš„Webç•Œé¢ä½“éªŒSageï¼Œå®æ—¶æ™ºèƒ½ä½“å¯è§†åŒ–ï¼š

```bash
# ä½¿ç”¨ DeepSeek-V3 (æ¨è)
streamlit run examples/sage_demo.py -- \
  --api_key YOUR_DEEPSEEK_API_KEY \
  --model deepseek-chat \
  --base_url https://api.deepseek.com/v1

# ä½¿ç”¨ OpenRouter (å¤šæ¨¡å‹)
streamlit run examples/sage_demo.py -- \
  --api_key YOUR_OPENROUTER_API_KEY \
  --model deepseek/deepseek-chat \
  --base_url https://openrouter.ai/api/v1

# ä½¿ç”¨ GPT-4
streamlit run examples/sage_demo.py -- \
  --api_key YOUR_OPENAI_API_KEY \
  --model gpt-4o \
  --base_url https://api.openai.com/v1
```

### ğŸŒ ç°ä»£åŒ–Webåº”ç”¨ï¼ˆFastAPI + Reactï¼‰

é€šè¿‡æˆ‘ä»¬å‰æ²¿çš„Webåº”ç”¨ä½“éªŒSageï¼Œé‡‡ç”¨ç°ä»£Reactå‰ç«¯å’ŒFastAPIåç«¯ï¼š

![Sage Webåº”ç”¨](assets/sage_web_app.png)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸ¤– **å¤šæ™ºèƒ½ä½“åä½œ** - å¯è§†åŒ–å·¥ä½œæµï¼ŒåŒ…å«åˆ†è§£ã€è§„åˆ’ã€æ‰§è¡Œã€è§‚å¯Ÿå’Œæ€»ç»“
- ğŸ§  **æ·±åº¦æ€è€ƒæ¨¡å¼** - å¯å±•å¼€çš„æ€è€ƒæ°”æ³¡ï¼Œæ˜¾ç¤ºæ™ºèƒ½ä½“æ¨ç†è¿‡ç¨‹
- ğŸš€ **FastAPIåç«¯** - é«˜æ€§èƒ½å¼‚æ­¥APIæœåŠ¡å™¨ï¼Œæ”¯æŒæµå¼å“åº”
- âš›ï¸ **Reactå‰ç«¯** - ç°ä»£åŒ–å“åº”å¼UIï¼Œé‡‡ç”¨Ant Designç»„ä»¶
- ğŸ“¡ **å®æ—¶é€šä¿¡** - WebSocket + SSEåŒé‡æ”¯æŒï¼Œå®ç°å®æ—¶æ›´æ–°
- ğŸ¨ **ç²¾ç¾ç•Œé¢** - å¯æŠ˜å æ·±åº¦æ€è€ƒæ°”æ³¡ï¼Œç°ä»£åŒ–è®¾è®¡
- ğŸ”§ **å·¥å…·ç®¡ç†** - è‡ªåŠ¨å·¥å…·å‘ç°å’Œç®¡ç†
- ğŸ“± **å“åº”å¼è®¾è®¡** - é€‚é…æ‰€æœ‰å±å¹•å°ºå¯¸
- ğŸ”§ **TypeScriptæ”¯æŒ** - å…¨ç¨‹ç±»å‹å®‰å…¨

**å¿«é€Ÿå¼€å§‹ï¼š**
```bash
cd examples/fastapi_react_demo

# åç«¯è®¾ç½®
python start_backend.py

# å‰ç«¯è®¾ç½®ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev
```

åœ¨ `http://localhost:8080` è®¿é—®åº”ç”¨ã€‚è¯¦ç»†è®¾ç½®è¯´æ˜è¯·å‚è§ [FastAPI React Demo README](examples/fastapi_react_demo/README.md)ã€‚

### ğŸ’» å‘½ä»¤è¡Œä½¿ç”¨

```python
from agents.agent.agent_controller import AgentController
from agents.tool.tool_manager import ToolManager
from openai import OpenAI

# DeepSeek-V3ç¤ºä¾‹
model = OpenAI(
    api_key="your-deepseek-api-key", 
    base_url="https://api.deepseek.com/v1"
)
tool_manager = ToolManager()
controller = AgentController(model, {
    "model": "deepseek-chat",
    "temperature": 0.7,
    "max_tokens": 4096
})

# æ‰§è¡Œä»»åŠ¡å¹¶è¿›è¡Œå…¨é¢è·Ÿè¸ª
messages = [{"role": "user", "content": "åˆ†æå½“å‰AIè¶‹åŠ¿å¹¶æä¾›å¯æ“ä½œçš„è§è§£"}]

# ä½¿ç”¨system_contextæä¾›é¢å¤–çš„è¿è¡Œæ—¶ä¿¡æ¯
system_context = {
    "ä»»åŠ¡ä¼˜å…ˆçº§": "é«˜",
    "æˆªæ­¢æ—¥æœŸ": "2024-01-15",
    "ç›®æ ‡å—ä¼—": "æŠ€æœ¯å›¢é˜Ÿ"
}

result = controller.run(
    messages, 
    tool_manager, 
    deep_thinking=True, 
    summary=True,
    system_context=system_context
)

# è®¿é—®ç»“æœå’Œä½¿ç”¨ç»Ÿè®¡
print("æœ€ç»ˆè¾“å‡º:", result['final_output']['content'])
print("ä»¤ç‰Œä½¿ç”¨:", result['token_usage'])
print("æ‰§è¡Œæ—¶é—´:", result['execution_time'])
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– **å¤šæ™ºèƒ½ä½“åä½œ (v0.9)**
- **ä»»åŠ¡åˆ†ææ™ºèƒ½ä½“**: å¢å¼ºçš„æ·±åº¦ç†è§£ï¼Œæ”¯æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥å’Œç»Ÿä¸€ç³»ç»Ÿæç¤ºç®¡ç†
- **ä»»åŠ¡åˆ†è§£æ™ºèƒ½ä½“**: æ–°å¢æ™ºèƒ½ä»»åŠ¡åˆ†è§£ï¼Œæ”¯æŒä¾èµ–åˆ†æå’Œå¹¶è¡Œæ‰§è¡Œè§„åˆ’
- **è§„åˆ’æ™ºèƒ½ä½“**: æˆ˜ç•¥æ€§åˆ†è§£ï¼Œæ”¯æŒä¾èµ–ç®¡ç†å’Œæœ€ä¼˜å·¥å…·é€‰æ‹©
- **æ‰§è¡Œæ™ºèƒ½ä½“**: æ™ºèƒ½å·¥å…·æ‰§è¡Œï¼Œæ”¯æŒé”™è¯¯æ¢å¤ã€é‡è¯•æœºåˆ¶å’Œå¹¶è¡Œå¤„ç†
- **è§‚å¯Ÿæ™ºèƒ½ä½“**: é«˜çº§è¿›åº¦ç›‘æ§ï¼Œæ”¯æŒå®Œæˆæ£€æµ‹å’Œè´¨é‡è¯„ä¼°
- **æ€»ç»“æ™ºèƒ½ä½“**: å…¨é¢ç»“æœç»¼åˆï¼Œæ”¯æŒç»“æ„åŒ–è¾“å‡ºå’Œå¯æ“ä½œè§è§£

### ğŸ› ï¸ **é«˜çº§å·¥å…·ç³»ç»Ÿ**
- **æ’ä»¶æ¶æ„**: çƒ­é‡è½½å·¥å…·å¼€å‘ï¼Œæ”¯æŒè‡ªåŠ¨æ³¨å†Œå’Œç‰ˆæœ¬ç®¡ç†
- **MCP æœåŠ¡å™¨æ”¯æŒ**: ä¸æ¨¡å‹ä¸Šä¸‹æ–‡åè®®æœåŠ¡å™¨å’Œè¿œç¨‹APIæ— ç¼é›†æˆ
- **è‡ªåŠ¨å‘ç°**: ä»ç›®å½•ã€æ¨¡å—å’Œè¿œç¨‹ç«¯ç‚¹æ™ºèƒ½æ£€æµ‹å·¥å…·
- **ç±»å‹å®‰å…¨**: å…¨é¢çš„å‚æ•°éªŒè¯å’Œæ¨¡å¼å¼ºåˆ¶ä»¥åŠè¿è¡Œæ—¶æ£€æŸ¥
- **é”™è¯¯å¤„ç†**: å¼ºå¤§çš„é”™è¯¯æ¢å¤ã€è¶…æ—¶ç®¡ç†ã€é‡è¯•ç­–ç•¥å’Œè¯¦ç»†æ—¥å¿—
- **æ€§èƒ½ç›‘æ§**: å·¥å…·æ‰§è¡Œæ—¶é—´è·Ÿè¸ªã€ç“¶é¢ˆæ£€æµ‹å’Œä¼˜åŒ–å»ºè®®

### ğŸ“Š **Tokenä½¿ç”¨å’Œæˆæœ¬ç›‘æ§**
- **å®æ—¶è·Ÿè¸ª**: ç›‘æ§æ‰€æœ‰æ™ºèƒ½ä½“å’Œæ“ä½œçš„tokenæ¶ˆè€—
- **è¯¦ç»†åˆ†æ**: è¾“å…¥ã€è¾“å‡ºã€ç¼“å­˜å’Œæ¨ç†tokenç»†åˆ†
- **æˆæœ¬ä¼°ç®—**: åŸºäºæ¨¡å‹å®šä»·å’Œä½¿ç”¨æ¨¡å¼è®¡ç®—æˆæœ¬
- **æ€§èƒ½æŒ‡æ ‡**: è·Ÿè¸ªæ‰§è¡Œæ—¶é—´ã€æˆåŠŸç‡å’Œæ•ˆç‡
- **å¯¼å‡ºåŠŸèƒ½**: CSVã€JSON å¯¼å‡ºä¾›è¿›ä¸€æ­¥åˆ†æ

```python
# è·å–å…¨é¢çš„tokenç»Ÿè®¡
stats = controller.get_comprehensive_token_stats()
print(f"æ€»Tokenæ•°: {stats['total_tokens']}")
print(f"æ€»æˆæœ¬: ${stats['estimated_cost']:.4f}")
print(f"æ™ºèƒ½ä½“ç»†åˆ†: {stats['agent_breakdown']}")

# æ‰“å°è¯¦ç»†ç»Ÿè®¡
controller.print_comprehensive_token_stats()
```

### âš™ï¸ **ä¸°å¯Œçš„é…ç½®ç³»ç»Ÿ**
- **ç¯å¢ƒå˜é‡**: `SAGE_DEBUG`, `OPENAI_API_KEY`, `SAGE_MAX_LOOP_COUNT` ç­‰
- **é…ç½®æ–‡ä»¶**: YAML/JSON é…ç½®ï¼Œæ”¯æŒéªŒè¯å’Œçƒ­é‡è½½
- **è¿è¡Œæ—¶æ›´æ–°**: æ— éœ€é‡å¯çš„åŠ¨æ€é…ç½®æ›´æ”¹
- **å‘½ä»¤è¡Œé€‰é¡¹**: å…¨é¢çš„å‘½ä»¤è¡Œç•Œé¢å’Œå¸®åŠ©ç³»ç»Ÿ
- **é…ç½®æ–‡ä»¶ç®¡ç†**: ä¿å­˜å’ŒåŠ è½½é…ç½®é…ç½®æ–‡ä»¶

### ğŸ”„ **æ‰§è¡Œæ¨¡å¼**

#### æ·±åº¦ç ”ç©¶æ¨¡å¼ï¼ˆå¤æ‚ä»»åŠ¡æ¨èï¼‰
```python
# å¢å¼ºçš„system_contextæ”¯æŒ
result = controller.run(
    messages, 
    tool_manager,
    deep_thinking=True,    # å¯ç”¨å…¨é¢ä»»åŠ¡åˆ†æ
    summary=True,          # ç”Ÿæˆè¯¦ç»†æ€»ç»“å’Œè§è§£
    deep_research=True,    # å®Œæ•´å¤šæ™ºèƒ½ä½“æµæ°´çº¿ä¸åˆ†è§£
    system_context={       # ç»Ÿä¸€ç³»ç»Ÿä¸Šä¸‹æ–‡ç®¡ç†
        "é¡¹ç›®èƒŒæ™¯": "AIç ”ç©¶é¡¹ç›®",
        "çº¦æŸæ¡ä»¶": ["æ—¶é—´: 2å°æ—¶", "èµ„æº: æœ‰é™"],
        "åå¥½è®¾ç½®": {"è¾“å‡ºæ ¼å¼": "è¯¦ç»†æŠ¥å‘Š"}
    }
)

# å®æ—¶æ›´æ–°çš„æµå¼ç‰ˆæœ¬
for chunk in controller.run_stream(
    messages, 
    tool_manager,
    deep_thinking=True,
    summary=True,
    deep_research=True,
    system_context=system_context  # æµå¼ä¼ è¾“ä¸­ä¸€è‡´çš„ç³»ç»Ÿä¸Šä¸‹æ–‡
):
    for message in chunk:
        print(f"[{message['type']}] {message['role']}: {message['show_content']}")
```

#### æ ‡å‡†æ‰§è¡Œæ¨¡å¼ï¼ˆå¹³è¡¡æ€§èƒ½ï¼‰
```python
result = controller.run(
    messages, 
    tool_manager,
    deep_thinking=True,    # å¯ç”¨ä»»åŠ¡åˆ†æ
    summary=True,          # ç”Ÿæˆæ€»ç»“
    deep_research=False,   # è·³è¿‡è¯¦ç»†åˆ†è§£é˜¶æ®µ
    system_context=system_context  # è¿è¡Œæ—¶ä¸Šä¸‹æ–‡æ”¯æŒ
)
```

#### å¿«é€Ÿæ‰§è¡Œæ¨¡å¼ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰
```python
result = controller.run(
    messages,
    tool_manager, 
    deep_thinking=False,   # è·³è¿‡åˆ†æ
    deep_research=False,   # ç›´æ¥æ‰§è¡Œ
    system_context=system_context  # å³ä½¿å¿«é€Ÿæ¨¡å¼ä¹Ÿæ”¯æŒä¸Šä¸‹æ–‡
)
```

## ğŸ“Š å®æ—¶æµå¼ä¼ è¾“å’Œç›‘æ§

å®æ—¶è§‚çœ‹æ™ºèƒ½ä½“å·¥ä½œï¼Œè¯¦ç»†è¿›åº¦è·Ÿè¸ªå’Œæ€§èƒ½æŒ‡æ ‡ï¼š

```python
import time

start_time = time.time()
token_count = 0

# å¢å¼ºçš„ç³»ç»Ÿä¸Šä¸‹æ–‡æµå¼ä¼ è¾“
system_context = {
    "ç›‘æ§çº§åˆ«": "è¯¦ç»†",
    "è¿›åº¦è·Ÿè¸ª": True,
    "æ€§èƒ½æŒ‡æ ‡": True
}

for chunk in controller.run_stream(messages, tool_manager, system_context=system_context):
    for message in chunk:
        # æ˜¾ç¤ºæ™ºèƒ½ä½“æ´»åŠ¨
        print(f"ğŸ¤– {message['role']}: {message['show_content']}")
        
        # è·Ÿè¸ªè¿›åº¦
        if 'usage' in message:
            token_count += message['usage'].get('total_tokens', 0)
        
        # å®æ—¶ç»Ÿè®¡
        elapsed = time.time() - start_time
        print(f"â±ï¸  æ—¶é—´: {elapsed:.1f}s | ğŸª™ ä»¤ç‰Œ: {token_count}")
```

## ğŸ”§ é«˜çº§å·¥å…·å¼€å‘

åˆ›å»ºå…·æœ‰å®Œæ•´æ¡†æ¶é›†æˆçš„å¤æ‚è‡ªå®šä¹‰å·¥å…·ï¼š

```python
from agents.tool.tool_base import ToolBase
from typing import Dict, Any, Optional
import requests

class DataAnalysisTool(ToolBase):
    """é«˜çº§æ•°æ®åˆ†æå·¥å…·ï¼Œæ”¯æŒç¼“å­˜å’ŒéªŒè¯"""
    
    @ToolBase.tool()
    def analyze_data(self, 
                    data_source: str, 
                    analysis_type: str,
                    options: Optional[Dict[str, Any]] = None) -> Dict[str, Any]:
        """
        æ‰§è¡Œå…¨é¢çš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–
        
        Args:
            data_source: æ•°æ®æºURLæˆ–è·¯å¾„
            analysis_type: åˆ†æç±»å‹ï¼ˆstatistical/trend/correlationï¼‰
            options: é¢å¤–çš„åˆ†æé€‰é¡¹
        """
        try:
            # æ‚¨çš„å®ç°ä»£ç 
            result = self._perform_analysis(data_source, analysis_type, options)
            
            return {
                "success": True,
                "data": result,
                "metadata": {
                    "execution_time": self.execution_time,
                    "data_size": len(result.get("records", [])),
                    "analysis_type": analysis_type
                }
            }
        except Exception as e:
            return {
                "success": False,
                "error": str(e),
                "error_type": type(e).__name__
            }
    
    def _perform_analysis(self, source, analysis_type, options):
        # å®ç°ç»†èŠ‚
        pass
```

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†å’Œå¯é æ€§

Sage åŒ…å«å…¨é¢çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶ï¼š

```python
from agents.utils.exceptions import SageException, with_retry, exponential_backoff

# å¸¦æŒ‡æ•°é€€é¿çš„è‡ªåŠ¨é‡è¯•
@with_retry(exponential_backoff(max_attempts=3, base_delay=1.0))
def robust_execution():
    return controller.run(messages, tool_manager)

# è‡ªå®šä¹‰é”™è¯¯å¤„ç†
try:
    result = controller.run(messages, tool_manager)
except SageException as e:
    print(f"Sage é”™è¯¯: {e}")
    print(f"é”™è¯¯ä»£ç : {e.error_code}")
    print(f"æ¢å¤å»ºè®®: {e.recovery_suggestions}")
```

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

ç›‘æ§å’Œä¼˜åŒ–æ‚¨çš„æ™ºèƒ½ä½“æ€§èƒ½ï¼š

```python
# å¯ç”¨è¯¦ç»†çš„æ€§èƒ½è·Ÿè¸ª
controller.enable_performance_monitoring()

# å¸¦ç›‘æ§çš„æ‰§è¡Œ
result = controller.run(messages, tool_manager)

# åˆ†ææ€§èƒ½
perf_stats = controller.get_performance_stats()
print(f"æ‰§è¡Œæ—¶é—´: {perf_stats['total_time']:.2f}s")
print(f"æ™ºèƒ½ä½“åˆ†è§£: {perf_stats['agent_times']}")
print(f"å·¥å…·ä½¿ç”¨: {perf_stats['tool_stats']}")
print(f"ç“¶é¢ˆ: {perf_stats['bottlenecks']}")

# å¯¼å‡ºæ€§èƒ½æ•°æ®
controller.export_performance_data("performance_report.json")
```

## ğŸ”Œ MCP æœåŠ¡å™¨é›†æˆ

ä¸æ¨¡å‹ä¸Šä¸‹æ–‡åè®®æœåŠ¡å™¨æ— ç¼é›†æˆï¼š

```bash
# å¯åŠ¨ MCP æœåŠ¡å™¨
python mcp_servers/weather_server.py &
python mcp_servers/database_server.py &

# åœ¨æ‚¨çš„åº”ç”¨ä¸­ä½¿ç”¨
tool_manager.register_mcp_server("weather", "http://localhost:8001")
tool_manager.register_mcp_server("database", "http://localhost:8002")

# å·¥å…·è‡ªåŠ¨å¯ç”¨
result = controller.run([{
    "role": "user", 
    "content": "è·å–ä¸œäº¬çš„å¤©æ°”å¹¶ä¿å­˜åˆ°æ•°æ®åº“"
}], tool_manager)
```

## ğŸ“š æ–‡æ¡£

- **[å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/QUICK_START.md)** - 5åˆ†é’Ÿå†…å¿«é€Ÿä¸Šæ‰‹
- **[æ¶æ„æ¦‚è§ˆ](docs/ARCHITECTURE.md)** - è¯¦ç»†çš„ç³»ç»Ÿè®¾è®¡
- **[API å‚è€ƒ](docs/API_REFERENCE_CN.md)** - å®Œæ•´çš„ API æ–‡æ¡£
- **[å·¥å…·å¼€å‘](docs/TOOL_DEVELOPMENT.md)** - åˆ›å»ºè‡ªå®šä¹‰å·¥å…·
- **[é…ç½®æŒ‡å—](docs/CONFIGURATION.md)** - é«˜çº§é…ç½®é€‰é¡¹
- **[ç¤ºä¾‹](docs/EXAMPLES_CN.md)** - å®é™…ä½¿ç”¨ç¤ºä¾‹

## ğŸ¯ ç”Ÿäº§éƒ¨ç½²

Sage å…·å¤‡ä¼ä¸šçº§ç‰¹æ€§ï¼Œå·²ä¸ºç”Ÿäº§ç¯å¢ƒåšå¥½å‡†å¤‡ï¼š

```python
from agents.config.settings import get_settings, update_settings

# ç”Ÿäº§ç¯å¢ƒé…ç½®
update_settings(
    debug=False,
    max_loop_count=5,
    tool_timeout=30,
    enable_logging=True,
    log_level="INFO"
)

# ä½¿ç”¨ç”Ÿäº§è®¾ç½®åˆå§‹åŒ–
controller = AgentController.from_config("production.yaml")
```

## ğŸ”„ æœ€æ–°æ›´æ–° (v0.9)

### âœ¨ æ–°åŠŸèƒ½
- ğŸ¯ **ä»»åŠ¡åˆ†è§£æ™ºèƒ½ä½“**: æ–°å¢ä¸“é—¨ç”¨äºæ™ºèƒ½ä»»åŠ¡åˆ†è§£å’Œä¾èµ–ç®¡ç†çš„æ™ºèƒ½ä½“
- ğŸ”§ **ç»Ÿä¸€ç³»ç»Ÿæç¤ºç®¡ç†**: é€šè¿‡`system_context`å‚æ•°åœ¨æ‰€æœ‰æ™ºèƒ½ä½“é—´é›†ä¸­å¼ç³»ç»Ÿä¸Šä¸‹æ–‡å¤„ç†
- ğŸ“Š **å¢å¼ºä»¤ç‰Œè·Ÿè¸ª**: å…¨é¢ä½¿ç”¨ç»Ÿè®¡ï¼Œè¯¦ç»†æˆæœ¬ç›‘æ§å’Œä¼˜åŒ–å»ºè®®
- ğŸ›¡ï¸ **å¼ºå¤§é”™è¯¯å¤„ç†**: é«˜çº§é”™è¯¯æ¢å¤ã€é‡è¯•æœºåˆ¶å’Œå…¨é¢å¼‚å¸¸å¤„ç†
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: é€šè¿‡æ”¹è¿›çš„èµ„æºç®¡ç†å’Œå¹¶è¡Œå¤„ç†å®ç°50%æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦
- ğŸŒ **ç°ä»£åŒ–Webåº”ç”¨**: å®Œæ•´çš„FastAPI + React Webåº”ç”¨ï¼Œæ”¯æŒTypeScriptå’Œå®æ—¶åä½œ

### ğŸ”§ æŠ€æœ¯æ”¹è¿›
- ğŸ—ï¸ **æ™ºèƒ½ä½“æ¶æ„**: åœ¨å·¥ä½œæµä¸­æ·»åŠ ä»»åŠ¡åˆ†è§£æ™ºèƒ½ä½“ä»¥æ”¹å–„ä»»åŠ¡åˆ†è§£
- ğŸ’¬ **ç³»ç»Ÿä¸Šä¸‹æ–‡API**: æ–°å¢`system_context`å‚æ•°ç”¨äºç»Ÿä¸€è¿è¡Œæ—¶ä¿¡æ¯ç®¡ç†
- ğŸ“ **ç³»ç»Ÿæç¤ºç»„ç»‡**: é€šè¿‡`SYSTEM_PREFIX_DEFAULT`å¸¸é‡å®ç°é›†ä¸­å¼ç³»ç»Ÿæç¤ºç®¡ç†
- ğŸ’¾ **å†…å­˜ç®¡ç†**: ä¸ºé•¿æ—¶é—´è¿è¡Œä»»åŠ¡å’Œå¤§è§„æ¨¡éƒ¨ç½²ä¼˜åŒ–å†…å­˜ä½¿ç”¨
- ğŸŒ **æµå¼ä¼ è¾“å¢å¼º**: æ”¹è¿›å®æ—¶æ›´æ–°ï¼Œæ›´å¥½çš„UIåé¦ˆå’ŒWebSocketå¯é æ€§
- ğŸ“Š **ä»¤ç‰Œåˆ†æ**: å…¨é¢ä½¿ç”¨è·Ÿè¸ªï¼Œæˆæœ¬ä¼˜åŒ–å»ºè®®å’Œé¢„ç®—ç®¡ç†

### ğŸ› é”™è¯¯ä¿®å¤
- ä¿®å¤æµå¼å“åº”ä¸­æ–­é—®é¢˜
- è§£å†³å·¥å…·æ‰§è¡Œè¶…æ—¶é—®é¢˜
- æ”¹è¿›ä¼šè¯ç®¡ç†å’Œæ¸…ç†
- å¢å¼ºé”™è¯¯æ¶ˆæ¯æ¸…æ™°åº¦å’Œè°ƒè¯•ä¿¡æ¯
- ä¿®å¤é•¿æ—¶é—´è¿è¡Œä¼šè¯ä¸­çš„å†…å­˜æ³„æ¼

### ğŸ“‹ APIå˜æ›´
- **æ–°å‚æ•°**: åœ¨`run()`å’Œ`run_stream()`æ–¹æ³•ä¸­æ·»åŠ `system_context`ç”¨äºç»Ÿä¸€ä¸Šä¸‹æ–‡ç®¡ç†
- **å·¥ä½œæµå¢å¼º**: åœ¨ä»»åŠ¡åˆ†æå’Œè§„åˆ’é˜¶æ®µä¹‹é—´æ·»åŠ ä»»åŠ¡åˆ†è§£æ™ºèƒ½ä½“
- **ç³»ç»Ÿæç¤º**: æ‰€æœ‰æ™ºèƒ½ä½“ç°åœ¨ä½¿ç”¨`SYSTEM_PREFIX_DEFAULT`å¸¸é‡è¿›è¡Œç»Ÿä¸€ç³»ç»Ÿæç¤ºç®¡ç†
- **å‘åå…¼å®¹**: æ‰€æœ‰ç°æœ‰APIä¿æŒå®Œå…¨å…¼å®¹

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- OpenAI æä¾›çš„å¼ºå¤§è¯­è¨€æ¨¡å‹
- DeepSeek æä¾›çš„å“è¶ŠV3æ¨¡å‹
- é˜¿é‡Œäº‘æä¾›çš„é€šä¹‰åƒé—®ç³»åˆ—
- å¼€æºç¤¾åŒºæä¾›çš„çµæ„Ÿå’Œå·¥å…·
- æ‰€æœ‰å¸®åŠ© Sage å˜å¾—æ›´å¥½çš„è´¡çŒ®è€…

---

<div align="center">
  <sub>ç”± Sage å›¢é˜Ÿç”¨ â¤ï¸ æ„å»º</sub>
</div>
