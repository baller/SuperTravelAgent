# ğŸ—ºï¸ ç™¾åº¦åœ°å›¾MCPæœåŠ¡å™¨é›†æˆæŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•åœ¨Sage FastAPI Reactæ¼”ç¤ºä¸­é›†æˆå’Œä½¿ç”¨ç™¾åº¦åœ°å›¾MCPæœåŠ¡å™¨ã€‚

## ğŸ“‹ æ¦‚è¿°

ç™¾åº¦åœ°å›¾MCPæœåŠ¡å™¨æä¾›äº†ä¸°å¯Œçš„åœ°ç†ä½ç½®æœåŠ¡APIï¼ŒåŒ…æ‹¬ï¼š

- ğŸŒ **åœ°ç†ç¼–ç ä¸é€†åœ°ç†ç¼–ç ** - åœ°å€ä¸åæ ‡äº’è½¬
- ğŸ” **åœ°ç‚¹æ£€ç´¢ä¸å‘¨è¾¹æœç´¢** - æŸ¥æ‰¾é™„è¿‘çš„å…´è¶£ç‚¹
- ğŸš— **è·¯çº¿è§„åˆ’ä¸å¯¼èˆª** - å¤šç§å‡ºè¡Œæ–¹å¼çš„è·¯å¾„è§„åˆ’
- ğŸ›ï¸ **è¡Œæ”¿åŒºåˆ’æŸ¥è¯¢** - è·å–è¡Œæ”¿åŒºåŸŸä¿¡æ¯
- ğŸ“ **åæ ‡è½¬æ¢** - ä¸åŒåæ ‡ç³»é—´çš„è½¬æ¢
- ğŸ“ **è·ç¦»è®¡ç®—** - ä¸¤ç‚¹é—´è·ç¦»æµ‹ç®—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£… Node.js å’Œ npmï¼š

```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version

# æ£€æŸ¥npmç‰ˆæœ¬  
npm --version
```

å¦‚æœæœªå®‰è£…ï¼Œè¯·è®¿é—® [https://nodejs.org/](https://nodejs.org/) ä¸‹è½½å®‰è£…ã€‚

### 2. è¿è¡Œå®‰è£…è„šæœ¬

åœ¨ `examples/fastapi_react_demo` ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
chmod +x install_baidu_mcp.sh
./install_baidu_mcp.sh
```

### 3. è·å–ç™¾åº¦åœ°å›¾APIå¯†é’¥

1. è®¿é—® [ç™¾åº¦åœ°å›¾å¼€æ”¾å¹³å°](https://lbsyun.baidu.com/)
2. æ³¨å†Œè´¦å·å¹¶åˆ›å»ºåº”ç”¨
3. è·å–APIå¯†é’¥ï¼ˆAKï¼‰

### 4. é…ç½®APIå¯†é’¥

åœ¨ `backend/config.yaml` æ–‡ä»¶ä¸­æ‰¾åˆ°ç™¾åº¦åœ°å›¾é…ç½®ï¼š

```yaml
mcp:
  servers:
    baidu-map:
      command: "npx"
      args: ["-y", "@baidumap/mcp-server-baidu-map"]
      env:
        BAIDU_MAP_API_KEY: "YOUR_API_KEY_HERE"  # æ›¿æ¢ä¸ºæ‚¨çš„APIå¯†é’¥
      disabled: false
      description: "ç™¾åº¦åœ°å›¾MCPæœåŠ¡å™¨ï¼Œæä¾›åœ°ç†ç¼–ç ã€é€†åœ°ç†ç¼–ç ã€åœ°ç‚¹æ£€ç´¢ã€è·¯çº¿è§„åˆ’ç­‰10ä¸ªåœ°å›¾ç›¸å…³APIæ¥å£"
```

å°† `YOUR_API_KEY_HERE` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…APIå¯†é’¥ã€‚

### 5. å¯åŠ¨æœåŠ¡

å¯åŠ¨åç«¯æœåŠ¡ï¼š

```bash
python start_backend.py
```

å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š

```bash
cd frontend
npm install
npm run dev
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åœ¨Webç•Œé¢ä¸­æŸ¥çœ‹

1. è®¿é—® [http://localhost:8080](http://localhost:8080)
2. åœ¨å·¦ä¾§è¾¹æ ç‚¹å‡» "MCPæœåŠ¡å™¨" 
3. æŸ¥çœ‹ç™¾åº¦åœ°å›¾æœåŠ¡å™¨çš„çŠ¶æ€å’Œå¯ç”¨å·¥å…·

### åœ¨å¯¹è¯ä¸­ä½¿ç”¨

æ‚¨å¯ä»¥å‘æ™ºèƒ½ä½“æå‡ºå„ç§åœ°ç†ä½ç½®ç›¸å…³çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š

#### åœ°ç†ç¼–ç ç¤ºä¾‹
```
"è¯·å¸®æˆ‘æŸ¥æ‰¾åŒ—äº¬å¸‚æœé˜³åŒºä¸‰é‡Œå±¯çš„åæ ‡"
```

#### å‘¨è¾¹æœç´¢ç¤ºä¾‹  
```
"å¸®æˆ‘æ‰¾ä¸€ä¸‹å¤©å®‰é—¨é™„è¿‘çš„é¤å…"
```

#### è·¯çº¿è§„åˆ’ç¤ºä¾‹
```
"è¯·è§„åˆ’ä»åŒ—äº¬ç«™åˆ°åŒ—äº¬å¤§å­¦çš„é©¾è½¦è·¯çº¿"
```

#### é€†åœ°ç†ç¼–ç ç¤ºä¾‹
```
"åæ ‡116.404,39.915æ˜¯ä»€ä¹ˆåœ°æ–¹ï¼Ÿ"
```

## ğŸ”§ é…ç½®è¯´æ˜

### MCPæœåŠ¡å™¨é…ç½®ç»“æ„

```yaml
mcp:
  servers:
    baidu-map:                          # æœåŠ¡å™¨åç§°
      command: "npx"                    # å¯åŠ¨å‘½ä»¤
      args: ["-y", "@baidumap/mcp-server-baidu-map"]  # å‘½ä»¤å‚æ•°
      env:                              # ç¯å¢ƒå˜é‡
        BAIDU_MAP_API_KEY: "your_key"  # ç™¾åº¦åœ°å›¾APIå¯†é’¥
      disabled: false                   # æ˜¯å¦ç¦ç”¨
      description: "æœåŠ¡æè¿°"           # æœåŠ¡æè¿°
```

### ç¯å¢ƒå˜é‡é…ç½®

æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®APIå¯†é’¥ï¼š

```bash
export BAIDU_MAP_API_KEY="your_api_key_here"
```

### å…¨å±€MCPé…ç½®

é¡¹ç›®æ ¹ç›®å½•çš„ `mcp_servers/mcp_setting.json` ä¹ŸåŒ…å«äº†ç™¾åº¦åœ°å›¾é…ç½®ï¼š

```json
{
  "mcpServers": {
    "baidu-map": {
      "command": "npx",
      "args": ["-y", "@baidumap/mcp-server-baidu-map"],
      "env": {
        "BAIDU_MAP_API_KEY": "your_key_here"
      },
      "disabled": false,
      "description": "ç™¾åº¦åœ°å›¾MCPæœåŠ¡å™¨ï¼Œæä¾›åœ°ç†ç¼–ç ã€é€†åœ°ç†ç¼–ç ã€åœ°ç‚¹æ£€ç´¢ã€è·¯çº¿è§„åˆ’ç­‰10ä¸ªåœ°å›¾ç›¸å…³APIæ¥å£"
    }
  }
}
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·API

ç™¾åº¦åœ°å›¾MCPæœåŠ¡å™¨æä¾›ä»¥ä¸‹å·¥å…·ï¼š

| å·¥å…·åç§° | åŠŸèƒ½æè¿° | ä½¿ç”¨åœºæ™¯ |
|---------|---------|---------|
| `map_geocoding` | åœ°ç†ç¼–ç  | åœ°å€è½¬åæ ‡ |
| `map_reverse_geocoding` | é€†åœ°ç†ç¼–ç  | åæ ‡è½¬åœ°å€ |
| `map_place_search` | åœ°ç‚¹æœç´¢ | æŸ¥æ‰¾å…´è¶£ç‚¹ |
| `map_nearby_search` | å‘¨è¾¹æœç´¢ | æŸ¥æ‰¾é™„è¿‘POI |
| `map_route_planning` | è·¯çº¿è§„åˆ’ | è·¯å¾„å¯¼èˆª |
| `map_district_search` | è¡Œæ”¿åŒºåˆ’ | åŒºåŸŸæŸ¥è¯¢ |
| `map_coordinate_convert` | åæ ‡è½¬æ¢ | åæ ‡ç³»è½¬æ¢ |
| `map_distance_calculate` | è·ç¦»è®¡ç®— | ä¸¤ç‚¹è·ç¦» |

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡å™¨æœªè¿æ¥**
   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®è®¾ç½®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
   - æŸ¥çœ‹åç«¯æ—¥å¿—è¾“å‡º

2. **Node.jsç›¸å…³é”™è¯¯**
   ```bash
   # æ¸…é™¤npmç¼“å­˜
   npm cache clean --force
   
   # é‡æ–°å®‰è£…åŒ…
   npm install -g @baidumap/mcp-server-baidu-map
   ```

3. **æƒé™é”™è¯¯**
   ```bash
   # ä½¿ç”¨sudoå®‰è£…ï¼ˆLinux/Macï¼‰
   sudo npm install -g @baidumap/mcp-server-baidu-map
   ```

### æ—¥å¿—æŸ¥çœ‹

æŸ¥çœ‹è¯¦ç»†çš„MCPæœåŠ¡å™¨æ—¥å¿—ï¼š

```bash
# å¯åŠ¨åç«¯æ—¶æŸ¥çœ‹æ—¥å¿—
python start_backend.py
```

### æµ‹è¯•è¿æ¥

æ‚¨å¯ä»¥åœ¨MCPæœåŠ¡å™¨é¢æ¿ä¸­æŸ¥çœ‹ï¼š
- æœåŠ¡å™¨çŠ¶æ€ï¼ˆå·²è¿æ¥/æœªè¿æ¥ï¼‰
- å¯ç”¨å·¥å…·æ•°é‡
- é…ç½®ä¿¡æ¯

## ğŸ“š APIå‚è€ƒ

### åœ°ç†ç¼–ç 

å°†åœ°å€è½¬æ¢ä¸ºåœ°ç†åæ ‡ï¼š

```json
{
  "tool": "map_geocoding",
  "parameters": {
    "address": "åŒ—äº¬å¸‚æœé˜³åŒºä¸‰é‡Œå±¯"
  }
}
```

### å‘¨è¾¹æœç´¢

æœç´¢æŒ‡å®šä½ç½®å‘¨è¾¹çš„å…´è¶£ç‚¹ï¼š

```json
{
  "tool": "map_nearby_search", 
  "parameters": {
    "location": "116.404,39.915",
    "radius": 1000,
    "query": "é¤å…"
  }
}
```

### è·¯çº¿è§„åˆ’

è§„åˆ’ä¸¤åœ°é—´çš„è¡Œé©¶è·¯çº¿ï¼š

```json
{
  "tool": "map_route_planning",
  "parameters": {
    "origin": "åŒ—äº¬ç«™",
    "destination": "åŒ—äº¬å¤§å­¦", 
    "mode": "driving"
  }
}
```

## ğŸ”— ç›¸å…³é“¾æ¥

- [ç™¾åº¦åœ°å›¾å¼€æ”¾å¹³å°](https://lbsyun.baidu.com/)
- [ç™¾åº¦åœ°å›¾MCPæœåŠ¡å™¨GitHub](https://github.com/baidu-maps/mcp)
- [MCPåè®®è§„èŒƒ](https://modelcontextprotocol.io/)
- [Sageå¤šæ™ºèƒ½ä½“æ¡†æ¶](https://github.com/ZHangZHengEric/Sage)

## ğŸ“„ è®¸å¯è¯

æœ¬é›†æˆéµå¾ªé¡¹ç›®åŸæœ‰çš„MITè®¸å¯è¯ã€‚ç™¾åº¦åœ°å›¾APIçš„ä½¿ç”¨éœ€éµå¾ªç™¾åº¦åœ°å›¾å¼€æ”¾å¹³å°çš„æœåŠ¡æ¡æ¬¾ã€‚

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹é¡¹ç›®ä¸»READMEæˆ–æäº¤Issueã€‚ 